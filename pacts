#!/bin/bash
# PACTS - Simple test runner for business users
# Usage: ./pacts test contact
#        ./pacts test opportunity
#        ./pacts test wikipedia

# Convert "test <name>" to "test --req <name>" for business users
if [ "$1" = "test" ] && [ -n "$2" ] && [[ ! "$2" =~ ^-- ]]; then
    # Second arg doesn't start with --, so it's a test name
    TEST_NAME="$2"
    shift 2  # Remove "test" and test name from args
    docker compose run --rm pacts-runner bash -c "python -m backend.cli.main test --req $TEST_NAME $@"
else
    # Pass through as-is (user already using full CLI syntax)
    docker compose run --rm pacts-runner bash -c "python -m backend.cli.main $@"
fi
