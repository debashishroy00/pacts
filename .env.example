# PACTS v3.0 Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# Database Configuration (Postgres)
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=pacts
POSTGRES_USER=pacts_user
POSTGRES_PASSWORD=pacts_dev_password
POSTGRES_POOL_MIN_SIZE=5
POSTGRES_POOL_MAX_SIZE=20

# Database URL (constructed from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=10

# Redis URL (constructed from above)
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# LangSmith Configuration (Telemetry)
# =============================================================================
LANGSMITH_API_KEY=your_langsmith_api_key_here
LANGSMITH_PROJECT=pacts-v3-dev
LANGSMITH_ENDPOINT=https://api.smith.langchain.com

# =============================================================================
# Feature Flags (v3.0)
# =============================================================================
# Enable/disable memory & persistence
ENABLE_MEMORY=true

# Enable/disable telemetry (LangSmith)
ENABLE_TELEMETRY=true

# Enable/disable observability API
ENABLE_API=true

# Enable/disable enhanced discovery
ENABLE_ENHANCED_DISCOVERY=true

# =============================================================================
# Cache Configuration
# =============================================================================
# Redis cache TTL (seconds)
REDIS_CACHE_TTL=3600

# Postgres selector cache retention (days)
SELECTOR_CACHE_RETENTION_DAYS=7

# Cache drift detection threshold (%)
CACHE_DRIFT_THRESHOLD=35

# =============================================================================
# Healing Configuration
# =============================================================================
# Maximum heal rounds per step
MAX_HEAL_ROUNDS=3

# Enable healing history learning
ENABLE_HEAL_HISTORY=true

# =============================================================================
# Observability API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Rate limiting (requests per minute)
API_RATE_LIMIT=100

# API authentication
API_KEY=your_api_key_here

# =============================================================================
# Telemetry Configuration
# =============================================================================
# Trace sampling rate (0.0 - 1.0)
TRACE_SAMPLE_RATE=1.0  # 100% in dev, 0.1 (10%) in prod

# Always trace failures
TRACE_FAILURES_ALWAYS=true

# PII redaction patterns (comma-separated regex patterns)
PII_REDACTION_PATTERNS=password,ssn,credit.*card,api.*key,token,secret

# =============================================================================
# Storage Configuration
# =============================================================================
# Artifact storage path
ARTIFACT_PATH=./artifacts

# Screenshot format
SCREENSHOT_FORMAT=png

# Blur sensitive fields in screenshots
BLUR_SENSITIVE_FIELDS=true

# =============================================================================
# Performance Configuration
# =============================================================================
# Connection timeout (seconds)
CONNECTION_TIMEOUT=30

# Query timeout (seconds)
QUERY_TIMEOUT=10

# Max concurrent database connections
MAX_DB_CONNECTIONS=20

# =============================================================================
# Cleanup Configuration
# =============================================================================
# Run cleanup job
ENABLE_CLEANUP=true

# Delete runs older than (days)
CLEANUP_RETENTION_DAYS=30

# Cleanup schedule (cron format)
CLEANUP_SCHEDULE="0 2 * * *"  # 2 AM daily

# =============================================================================
# Development Settings
# =============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Pretty print JSON logs
LOG_PRETTY=true

# Enable debug mode
DEBUG=false

# =============================================================================
# Production Settings (override in .env.prod)
# =============================================================================
# In production, set:
# - TRACE_SAMPLE_RATE=0.1
# - DEBUG=false
# - LOG_LEVEL=WARNING
# - Use strong passwords
# - Use production API keys
# =============================================================================
