# =============================================================================
# PACTS Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string for LangGraph checkpointer and episodic memory
DATABASE_URL=postgresql://pacts:pacts@localhost:5432/pacts

# Postgres configuration (for Docker Compose)
POSTGRES_USER=pacts
POSTGRES_PASSWORD=pacts
POSTGRES_DB=pacts
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Redis connection for POM cache and working memory
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# LangSmith Configuration
# -----------------------------------------------------------------------------
# LangSmith for observability and telemetry
# Get your API key from https://smith.langchain.com/
LANGSMITH_API_KEY=your-langsmith-api-key-here
LANGSMITH_PROJECT=pacts
LANGSMITH_TRACING=true

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------
# ANTHROPIC API KEY (Required for natural language test parsing in Planner)
# Get your API key from https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# AWS Bedrock credentials for Claude models (alternative to direct API)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# Model configuration
LLM_MODEL=anthropic.claude-3-5-sonnet-20241022-v2:0
LLM_TEMPERATURE=0.0
LLM_MAX_TOKENS=4096

# -----------------------------------------------------------------------------
# Playwright Configuration
# -----------------------------------------------------------------------------
# Browser automation settings
HEADLESS=true
BROWSER_TIMEOUT=30000
BROWSER_VIEWPORT_WIDTH=1920
BROWSER_VIEWPORT_HEIGHT=1080

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# FastAPI settings
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_WORKERS=1

# CORS settings (comma-separated origins)
CORS_ORIGINS=http://localhost:4200,http://localhost:3000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
STRUCTLOG_CONSOLE=true

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
# Test execution settings
MAX_HEAL_ROUNDS=3
ACTIONABILITY_TIMEOUT=5000
STABILITY_SAMPLES=3
STABILITY_DELAY_MS=120
STABILITY_TOLERANCE=2.0

# -----------------------------------------------------------------------------
# File Paths
# -----------------------------------------------------------------------------
# Directories for generated artifacts
GENERATED_TESTS_DIR=../generated_tests
REQUIREMENTS_EXCEL_DIR=../requirements
POLICIES_DIR=../policies

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable/disable features
ENABLE_WEBSOCKET=true
ENABLE_TELEMETRY=true
ENABLE_CACHING=true
ENABLE_AUTO_HEALING=true

# MCP Playwright Integration (default: false for backward compatibility)
USE_MCP=false
MCP_PW_SERVER_URL=http://localhost:8765
MCP_PW_TIMEOUT_MS=5000
# MCP_PW_API_KEY=optional-token-here

# -----------------------------------------------------------------------------
# PACTS v3.1s - Stealth Mode & Data-Driven Execution
# -----------------------------------------------------------------------------
# Stealth Mode: Makes headless browsers undetectable (avoids GitHub blocks, etc.)
PACTS_STEALTH=true

# Persistent Browser Profiles: Save cookies/storage between runs
PACTS_PERSISTENT_PROFILES=false
PACTS_PROFILE_DIR=runs/userdata

# Browser Configuration
PACTS_TZ=America/New_York
PACTS_LOCALE=en-US

# Data-Driven Execution
PACTS_DATA_DIR=tests/data
PACTS_MAX_PARALLEL_DATASETS=2

# -----------------------------------------------------------------------------
# Security (Optional - Phase 4)
# -----------------------------------------------------------------------------
# API authentication
# API_KEY=your-api-key-here
# JWT_SECRET=your-jwt-secret-here
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION_MINUTES=60
